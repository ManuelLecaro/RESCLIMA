{% extends 'main/base.html' %}
{% load static %}

{% block title%}RESCLIMA | CAPAS RASTER{% endblock %}

{% block content %}
  <body>
    {% if rasterlayers %}
      <b>Capas raster:</b>
      <table border="0" cellspacing="0" cellpadding="5" style="padding-left:20px">
        {% for raster in rasterlayers %}
          <tr>
            <td>
              <span style="font-family:monospace">{{ raster.title}}</span>
            </td>
            <td>&nbsp;</td>
            <td>
              <a href="/raster/view/{{ raster.id }}">Visualizar</a>
            </td>
            <td>&nbsp;</td>
            <td>
              <a href="/raster/export/{{ raster.id }}">Descargar</a>
            </td>
            <td>&nbsp;</td>
            <td>
              <a href="/raster/edit/{{ raster.id }}">Editar</a>
            </td>
            <td>&nbsp;</td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}
    <button type="button" onClick='window.location="/raster/import";'>Importar raster</button>
    <br>
    
    <b>Estilos</b>
    {% if styles %}
      <table border="0" cellspacing="0" cellpadding="5" style="padding-left:20px">
        {% for style in styles %}
          <tr>
            <td>
              <span style="font-family: :monospace">{{style.title}}</span>
            </td>
            <td>&nbsp;</td>
            <td>
              <a href="#" onclick="confirmationDelete('/raster/delete/{{ raster.id }}')">Eliminar</a>
            </td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}
    <br>
    <button type="button" onClick='window.location="/raster/import_style";'>Importar estilo</button>

  </body>
{% endblock content %}

{% block extra_js %}
<script>
  function confirmationDelete(url){
    swal({
      title: "¿Seguro desea eliminar esta capa?",
      text: "¡Cuidado!",
      type: "warning",
      showCancelButton: true,
      confirmButtonClass: "btn-danger",
      confirmButtonText: "Eliminar",
      cancelButtonText: "Cancelar",
      closeOnConfirm: false,
      closeOnCancel: false
      },
      function(isConfirm) {
      if (isConfirm) {
        window.location.replace(url);
        swal("¡Borrado!", "La capa ha sido borrada correctamente", "success");
      } else {
        swal("¡Cancelado!", "No se ha registrado ningún cambio", "error");
      }
    });
  }
</script>

{% endblock extra_js %}