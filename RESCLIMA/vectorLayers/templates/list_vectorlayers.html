{% extends 'main/base.html' %}
{% load static %}

{% block title %} RESCLIMA DURAN | Capas Vectoriales{% endblock %}

{% block content %}
<div class="container">
	<div class="section">
	{% if vectorlayers %}
			<div id="bordered-table">
				<h4 class="header">CAPAS VECTORIALES</h4>
				<div class="row">
					<div class="col s12">
						<table class="bordered">
						{% for vectorlayer in vectorlayers %}
							<tbody>
								<tr>
									<td>
										<span style="font-family:monospace">{{ vectorlayer.title}}</span>
									</td>
									<td>
										<a href="/vector/view/{{ vectorlayer.id }}">Visualizar</a>
									</td>
									<td>
										<a href="/vector/export/{{ vectorlayer.id }}">Descargar zip</a>
									</td>
									<td>
											<a href="/vector/edit/{{ vectorlayer.id }}">Editar</a>
									</td>
									<td>
										<a href="#" onclick="confirmationDelete('/vector/delete/{{ vectorlayer.id }}')">Eliminar</a>	
									</td>
								</tr>
							</tbody>
						{% endfor %}
						</table>
					</div>
				</div>
			</div>
	{% else %}
		<h4>No hay capas</h4>
	{% endif %}
	<div class="card-action">
			<button class="waves-effect waves-light btn gradient-45deg-red-pink" onClick='window.location="/vector/import"'>Importar Shapefile</button>
	</div>
	</div>
</div>
	<div style="height:100px;"></div>
{% endblock %}


{% block extra_js %}
<script>
  function confirmationDelete(url){
    swal({
      title: "¿Seguro desea eliminar esta capa?",
      text: "¡Cuidado!",
      type: "warning",
      showCancelButton: true,
      confirmButtonClass: "btn-danger",
      confirmButtonText: "Eliminar",
      cancelButtonText: "Cancelar",
      closeOnConfirm: false,
      closeOnCancel: false
      },
      function(isConfirm) {
      if (isConfirm) {
        window.location.replace(url);
        swal("¡Borrado!", "La capa ha sido borrada correctamente", "success");
      } else {
        swal("¡Cancelado!", "No se ha registrado ningún cambio", "error");
      }
    });
  }
</script>

{% endblock extra_js %}