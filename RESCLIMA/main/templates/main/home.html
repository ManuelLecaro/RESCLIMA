{% extends 'main/base.html' %}
{% load static %}

{% block title%}RESCLIMA | BUSCAR{% endblock %}


{% block content %}
	<!-- START MAIN -->
<div id="main">
	<!-- START WRAPPER -->
	<div class="wrapper">
		<div id="searchForm" class="container">
			<div class="section">
			<div class="row">
				<div class="col s4">
					<div>
						<label>多Qu&eacute;?</label>
						<input 
							type="search" 
							v-model="shared.text"
							v-on:focus="currentComponent='categories_component'" 
							autofocus>
					</div>
					<div>
						<label>多D&oacute;nde?</label>
						<input 
							type="search"
							v-on:focus="currentComponent='bbox_component'">
					</div>
					<div>
						<label>多Cu&aacute;ndo?</label>
						<input 
							type="text"
							v-on:focus="currentComponent='time_component'">
					</div>
					<div>
						<label>多C&oacute;mo?</label>
						<div>
						<button
							class="btn-default"
							v-bind:class="{cyan: shared.search_option === 'layers'}"
							v-on:click.prevent="shared.search_option='layers'">
							<i class="material-icons">layers</i><br>Capas
						</button>
						<button
							style="margin-left:10px"
							class="btn-default"
							v-bind:class="{cyan: shared.search_option === 'series'}"
							v-on:click.prevent="shared.search_option='series'">
							<i class="material-icons">timeline</i><br>Series de tiempo
						</button>
						</div>
					</div>
					<div style="padding:60px;">
						<a class="btn waves-effect waves-light gradient-45deg-light-blue-cyan"  v-on:click="search"><i class="material-icons left">search</i>Buscar</a>
					</div>
				</div>
				<div style="align-items: center; justify-content: center" class="col s8">
						<categories_component v-bind:style="[currentComponent=='categories_component'? {'display':''}:{'display':'none'}]"></categories_component>
						<bbox_component v-bind:style="[currentComponent=='bbox_component'? {'display':''}:{'display':'none'}]"></bbox_component>
						<time_component v-bind:style="[currentComponent=='time_component'? {'display':''}:{'display':'none'}]"></time_component>
				</div>
			</div>
			</div>
			<!-- Lista de resultados -->
			<div class="container">
				<div class="row">
					<keep-alive>
						<component v-bind:is='shared.search_option+"_component"'></component>
					</keep-alive>
				</div>

				<div v-if="shared.state=='loading'">
					<div class="preloader-wrapper big active">
						<div class="spinner-layer spinner-blue-only">
							<div class="circle-clipper left">
								<div class="circle"></div>
							</div>
							<div class="gap-patch">
								<div class="circle"></div>
							</div>
							<div class="circle-clipper right">
								<div class="circle"></div>
							</div>
						</div>
					</div>
				</div>
				<div v-if="shared.state=='fail'">
					<div class="red">
						<b>Ha ocurrido un error</b>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>

{% endblock %}


{% block scripts_body  %}
	<script src="{% static "main/js/vue.min.js" %}"></script>
	<script src="{% static "main/js/vue-router.min.js" %}"></script>
	<script src="{% static "main/js/categories_component.js" %}"></script>
	<script src="{% static "main/js/OpenLayers.js" %}"></script>
	<script src="{% static "main/js/store.js" %}"></script>
	<script src="{% static "main/js/BboxSelector.js" %}"></script>
	<script src="{% static "main/js/bbox_component.js" %}"></script>
	<script src="{% static "main/js/time_component.js" %}"></script>
	<script src="{% static "main/js/layers_component.js" %}"></script>
	<script src="{% static "main/js/series_component.js" %}"></script>
	<script src="{% static "main/js/main.js" %}"></script>
{% endblock%}

